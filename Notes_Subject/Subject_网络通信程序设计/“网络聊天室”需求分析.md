### 功能需求分析 

> #### 客户端

+ 用户注册登录模块
  + 获取新用户信息，校验通过后存入数据库
  + 已注册用户通过登录验证，进入系统
+ 用户信息修改模块
  + 用户基本信息修改
  + 用户密码修改
+ 好友管理模块
  + 通过用户名添加好友
  + 管理好友（删除，备注等）
  + 查看好友信息
+ 私聊模块
  + 与指定好友进行聊天

+ 群聊模块

  + 实时显示加入用户或退出用户
  + 显示群聊消息

+ 登录状态管理模块

  + 通过心跳机制，向服务端报告客户端状态

> #### 服务端

+ 用户管理模块

  + 查看用户信息
  + 修改用户部分信息
+ 在线信息模块
  + 实时查看用户在线状况
  + 根据客户端发送过来的心跳消息，管理在线用户
+ 环境配置模块
  + 配置服务器端口信息
  + 配置服务器数据库信息

### 通信协议分析

+ 协议选型：json数据传输协议

+ 客服端协议

  + 用户登录

    ```json
    {
        "code":100,
        "message":"xxx",
        "user":{
            "name":"xxx",
            "password":"xxx"
            ...
        }
    }
    ```

  + 用户登出

    ```
    {
        "code":101,
        "message":"xxx",
        "token":"xxxxxxxxxxxxxxxxxxx"
    }
    ```

    

  + 用户注册

    ```javascript
    {
        "code":
    }
    ```

  + 发送消息

    ```javascript
    {
        "code":100,
        "from":{
            "user":{
                "name":"xxx"
                ...
            }
        },
        "to":{
            "user":{
                "name":"xxx"
                ...
            }
        }
        "message":"xxx",
        "date":"2018-05-xx HH:mm:ss"
    }
    ```

  + 建立私聊

    ```
    
    ```

  + 加入/退出群聊

    ```
    
    ```

    

+ 服务端协议

  + 登录应答

    ```
    {
        "code":100,
        "message":"xxx",
        "result":1, // 0表示失败，1表示成功
        "token":"xxxxxxxxxxxxxxxxxxx"
    }
    ```

  + 登出应答

    ```
    {
        "code":101,
        "message":"xxx",
        "result":1, // 0表示失败，1表示成功
    }
    ```

  + 消息转发

    ```
    {
        
    }
    ```

  + 心跳应答

    ```
    {
        "code":200,
        "users":[
            {
                "name":"xxx",
                "state":"on"
            },
            {
                "name":"xxx",
                "state":"off"
            },
            ...
        ]
    }
    ```

    

### 开发平台

+ 语言：Java
+ UI：JavaFX
+ 网络框架：Netty（一款高并发网络框架，待选）
+ 数据库：MySQL
+ 缓存：Redis（待选）


