### 14.1 无处不在的函数

“函数式编程”意指函数或者方法的行为应该像“数学函数”一样——没有任何副作用。对于使用函数式语言的程序员而言，这个术语的范畴更加宽泛，它还意味着函数可以像任何其他值一样随意使用：可以作为参数传递，可以作为返回值，还能存储在数据结构中。能够像普通变量一样使用的函数称为一等函数（first-class function）。这是Java 8补充的全新内容：通过::操作符，你可以创建一个方法引用，像使用函数值一样使用方法，也能使用Lambda表达式（比如，(int x) -> x + 1）直接表示方法的值。Java 8中使用下面这样的方法引用将一个方法引用保存到一个变量是合理合法的：

```java
Function<String, Integer> strToInt = Integer::parseInt;
```

#### 14.1.1 高阶函数

函数式编程的世界里，如果函数，比如Comparator.comparing，能满足下面任一要求就可以被称为高阶函数（higher-order function）：

+ 接受至少一个函数作为参数
+ 返回的结果是一个函数

#### 14.1.2 科里化

科里化的理论定义

 科里化是一种将具备2个参数（比如，x和y）的函数f转化为使用一个参数的函数g，并且这个函数的返回值也是一个函数，它会作为新函数的一个参数。后者的返回值和初始函数的返回值相同，即f(x,y) = (g(x))(y)。 

当然，我们可以由此推出：你可以将一个使用了6个参数的函数科里化成一个接受第2、4、6号参数，并返回一个接受5号参数的函数，这个函数又返回一个接受剩下的第1号和第3号参数的函数。

一个函数使用所有参数仅有部分被传递时，通常我们说这个函数是部分应用的（partially applied）。

### 14.2 持久化数据结构

#### 14.2.1 破坏式更新和函数式更新的比较

#### 14.2.2 另一个使用Tree的例子

#### 14.2.3 采用函数式的方法

### 14.3 Stream的延迟计算

#### 14.3.1 自定义Stream

#### 14.3.2 创建你自己的延迟列表

### 14.4 模式匹配

#### 14.4.1 访问者设计模式

#### 14.4.2 用模式匹配力挽狂澜

### 14.5 杂项

#### 14.5.1 缓存或记忆表

#### 14.5.2 “返回同样的对象”意味着什么

#### 14.5.3 结合器

函数式编程时编写高阶函数是非常普通而且非常自然的事。高阶函数接受两个或多个函数，并返回另一个函数，实现的效果在某种程度上类似于将这些函数进行了结合。术语**结合器**通常用于描述这一思想。

### 14.6 小结

(1) 一等函数是可以作为参数传递，可以作为结果返回，同时还能存储在数据结构中的函数。

(2) 高阶函数接受至少一个或者多个函数作为输入参数，或者返回另一个函数的函数。Java中典型的高阶函数包括comparing、andThen和compose。

(3) 科里化是一种帮助你模块化函数和重用代码的技术。

(4) 持久化数据结构在其被修改之前会对自身前一个版本的内容进行备份。因此，使用该技术能避免不必要的防御式复制。

(5) Java语言中的Stream不是自定义的。

(6) 延迟列表是Java语言中让Stream更具表现力的一个特性。延迟列表让你可以通过辅助方法（supplier）即时地创建列表中的元素，辅助方法能帮忙创建更多的数据结构。

(7) 模式匹配是一种函数式的特性，它能帮助你解包数据类型。它可以看成Java语言中switch语句的一种泛化。

(8) 遵守“引用透明性”原则的函数，其计算结构可以进行缓存。

(9) 结合器是一种函数式的思想，它指的是将两个或多个函数或者数据结构进行合并。

 