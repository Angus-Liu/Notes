# 操作系统知识点

## # 进程

> [《现代操作系统》- 第 2 章 进程与线程](https://book.douban.com/subject/3852290/)

### 进程模型

在进程模型中，计算机上所有可运行的软件，通常也包括操作系统，被组织成若干**顺序进程**（sequential process），简称**进程**（process）。一个进程就是一个正在执行程序的实例，包括程序计数器、寄存器和变量的当前值。

### 进程的创建

- **4 种**主要事件会导致进程的创建：
  1. 系统初始化。
  2. 正在运行的程序执行了创建进程的系统调用。
  3. 用户请求创建一个新进程。
  4. 一个批处理作业的初始化。

- 从技术上看，在以上所有情形中，新进程都是由于一个已存在的进程执行了一个用于创建进程的系统调用而创建的。

- 在 UNIX 系统中，只有一个系统调用可以用来创建新进程：fork。
- 在 Windows 中，一个 Win32 函数调用 CreateProcess 既处理进程的创建，也负责把正确的程序装入新的进程。

### 进程的终止

进程的终止，通常由下列条件引起：

+ 正常退出（自愿）
+ 出错退出（自愿）
+ 严重错误（非自愿）
+ 被其他进程杀死（非自愿）

### 进程的状态

进程的三种状态：

1. 运行态：该时刻进程实际占用 CPU。
2. 就绪态：可运行，但因为其他进程正在运行而暂时停止。
3. 阻塞态：除非某种外部事件发生，否则进程不能运行。

![1542289841869](assets/1542289841869.png)

## # 进程之间通信方式

> [《现代操作系统》- 第 2 章 进程与线程](https://book.douban.com/subject/3852290/)

### 竞争条件

两个或多个进程读写某些共享数据，而最后的结果取决于进程运行的精确时序，称为**竞争条件**（race condition）。

### 临界区

对共享内存进行访问的程序片段称作**临界区域**（critical region）或**临界区**（critical section）。如果能使两个进程不可能同时处于临界区，就能够避免竞争条件。

## # 线程

> [《现代操作系统》- 第 2 章 进程与线程](https://book.douban.com/subject/3852290/)
>
> [线程](https://zh.wikipedia.org/wiki/%E7%BA%BF%E7%A8%8B)

### 概念

线程（thread）是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。在 Unix System V 及 SunOS 中也被称为轻量级进程（lightweight processes），但轻量级进程更多指内核线程（kernel thread），而把用户线程（user thread）称为线程。

### 使用线程的原因

+ 有了多线程之后，并行实体才拥有共享同一个地址空间和所有可用数据的能力。这是多进制模型（它们具有不同的地址空间）所无法表达的。
+ 线程比进程更轻量级，它们比进程更容易创建，也更容易撤销。
+ 如果存在大量的计算和大量的 I/O 处理，拥有多个线程允许这些活动彼此重叠运行，从而加快应用程序执行的速度。
+ 在多 CPU 系统中，多线程是有益的，这让真正的并行有了实现的可能。